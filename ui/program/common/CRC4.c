//////////////////////////////////////////////////////////////////////////////////////////////////////
// 	File name	:	CRC8.c
// 	Brief 		: 	Calculate CRC 8 bit
//					
//	Author 		: 	AnhNH57
//  Note 		: 	
//
//////////////////////////////////////////////////////////////////////////////////////////////////////
// 	MODIFICATION HISTORY:
//
// 	Ver  	PIC  		Date       	Changes
// 	----- 	-------- 	---------- 	------------------------------------------------------------------
// 	1.00  	AnhNH57  	27-09-2013 	Create Framework
// 
//////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////// Include Files /////////////////////////////////////////////
#include "CRC4.h"

///////////////////////////////////// Constant Definitions ///////////////////////////////////////////

/////////////////////////////////////// Type Definitions /////////////////////////////////////////////
typedef union S_U8_tag
{
    uint8_t         Value;
    struct 
    {
        uint8_t     LN:4;
        uint8_t     HN:4;
    };
}
S_U8;

///////////////////////////// Macros (Inline Functions) Definitions //////////////////////////////////

///////////////////////////////////// Function Prototypes ////////////////////////////////////////////

///////////////////////////////////// Variable Definitions ///////////////////////////////////////////
const uint8_t g_aru8CRC4Table[16] = 
{
	0x00, 0x03, 0x06, 0x05, 
	0x0C, 0x0f, 0x0A, 0x09, 
	0x0B, 0x08, 0x0D, 0x0E, 
	0x07, 0x04, 0x01, 0x02
};

///////////////////////////////////// Function implements ////////////////////////////////////////////
#if (1)
uint8_t CalculateCRC4           (const uint8_t         *pu8Data,
                                 size_t                 szBytesCount)
{
    size_t  i;
    uint8_t u8CRC = 0;

    for(i = 0; i < szBytesCount; i++)
    {
        u8CRC ^= CalculateByteCRC4(pu8Data[i]);
    }

    return u8CRC;
}

#endif

